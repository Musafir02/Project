<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smart Resume Builder</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
</head>
<body>
  <button id="toggle-theme" class="theme-toggle">ðŸŒ™</button>

  <div class="main-container">
    <!-- Resume Editor (Form) -->
    <div id="editor" class="column">
      <header>
        <h1>ðŸš€ Smart Resume Builder</h1>
        <p>Build your resume professionally with AI tips.</p>
        <button type="button" id="pdf-btn">Download PDF</button>
      </header>

      <form id="resume-form">
        <fieldset>
          <legend>ðŸ‘¤ Personal Info</legend>
          <label for="name">Full Name</label>
          <input type="text" id="name" class="live-update" />

          <label for="email">Email Address</label>
          <input type="email" id="email" class="live-update" />

          <label for="phone">WhatsApp No.</label>
          <input type="tel" id="phone" class="live-update" />

          <label for="address">Full Address</label>
          <textarea id="address" rows="2" class="live-update"></textarea>
        </fieldset>

        <fieldset>
          <legend>ðŸŽ“ Education</legend>
          <div id="education-entries"></div>
          <button type="button" id="add-education-btn" class="add-btn">Add Education</button>
        </fieldset>

        <fieldset>
          <legend>ðŸ’¼ Professional Details</legend>
          <label for="skills">Skills</label>
          <textarea id="skills" rows="3" class="live-update" placeholder="Each skill on a new line"></textarea>

          <label for="experience">Experience</label>
          <textarea id="experience" rows="4" class="live-update" placeholder="Job roles, each on a new line"></textarea>

          <label for="strengths">Strengths</label>
          <textarea id="strengths" rows="2" class="live-update"></textarea>

          <label for="hobbies">Hobbies</label>
          <textarea id="hobbies" rows="2" class="live-update"></textarea>
        </fieldset>
      </form>
    </div>

    <!-- Resume Preview -->
    <div id="preview" class="column">
      <div class="resume-paper">
        <h2 class="preview-title">RESUME</h2>
        <div class="preview-header">
          <h3 id="preview-name">Your Name</h3>
          <p id="preview-contact">Contact Info</p>
        </div>

        <div class="preview-section">
          <h4>EDUCATION</h4>
          <div id="preview-education">
            <p class="placeholder-text">Your education will appear here.</p>
          </div>
        </div>

        <div id="preview-skills" class="preview-section">
          <h4>SKILLS</h4>
          <p class="placeholder-text">Your skills will appear here.</p>
        </div>

        <div id="preview-experience" class="preview-section">
          <h4>EXPERIENCE</h4>
          <p class="placeholder-text">Your experience will appear here.</p>
        </div>

        <div id="preview-strengths" class="preview-section">
          <h4>STRENGTHS</h4>
          <p class="placeholder-text">Your strengths will appear here.</p>
        </div>

        <div id="preview-hobbies" class="preview-section">
          <h4>HOBBIES</h4>
          <p class="placeholder-text">Your hobbies will appear here.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- ðŸ’¬ AI Chat Box -->
  <div id="chatbox">
    <div id="chatbox-header">ðŸ’¡ AI Resume Coach</div>
    <div id="chatbox-messages"></div>
    <div id="chatbox-input">
      <input type="text" id="chat-input" placeholder="e.g. Google SWE" />
      <button onclick="sendChat()">Send</button>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
  <script src="script.js"></script>
  <script>
    async function sendChat() {
      const input = document.getElementById("chat-input");
      const messages = document.getElementById("chatbox-messages");
      const userMsg = input.value.trim();
      if (!userMsg) return;

      messages.innerHTML += `<div><strong>You:</strong> ${userMsg}</div>`;
      input.value = "...";

      try {
        const res = await fetch("http://localhost:5000/ask", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message: userMsg })
        });
        const data = await res.json();
        messages.innerHTML += `<div><strong>AI:</strong> ${data.reply}</div>`;
        input.value = "";
      } catch (err) {
        messages.innerHTML += `<div><strong>AI:</strong> Error connecting to server.</div>`;
        input.value = "";
      }

      // Scroll to bottom
      messages.scrollTop = messages.scrollHeight;
    }

    // Optional: Theme toggle animation
    document.getElementById("toggle-theme").addEventListener("click", () => {
      document.body.classList.toggle("dark");
    });
  </script>
</body>
</html>